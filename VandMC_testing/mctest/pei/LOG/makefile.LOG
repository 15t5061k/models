MASLLIB=-L/$(HOME)/git/masl/install/lib
MASLINCLUDE=-I/$(HOME)/git/masl/install/include
CXXFLAGS=$(MASLINCLUDE) -Iinclude -fPIC
OUTDIR=bin
SRCDIR=src

ARTIFACTS=                libLOG_interface.so \
                          libLOG.so \
                          libLOG_sqlite.so \
                          libLOG_metadata.so \
                          libLOG_if_metadata.so \
                          libLOG_inspector.so \
                          libLOG_if_inspector.so \
                          libLOG_transient.so

LOG_interface_SOURCES=    $(SRCDIR)/__LOG_types.cc \
                          $(SRCDIR)/__LOG_interface.cc
LOG_interface_OBJECTS=    $(LOG_interface_SOURCES:.cc=.o)

LOG_SOURCES=              $(SRCDIR)/__LOG.cc \
                          $(SRCDIR)/__LOG_private_types.cc \
                          $(SRCDIR)/__LOG__LogSuccess.cc \
                          $(SRCDIR)/__LOG__LogFailure.cc \
                          $(SRCDIR)/__LOG__LogInfo.cc
LOG_OBJECTS=              $(LOG_SOURCES:.cc=.o)

LOG_sqlite_SOURCES=       $(SRCDIR)/sqlite_dummy.cc
LOG_sqlite_OBJECTS=       $(LOG_sqlite_SOURCES:.cc=.o)

LOG_metadata_SOURCES=     $(SRCDIR)/MetaData__LOG.cc
LOG_metadata_OBJECTS=     $(LOG_metadata_SOURCES:.cc=.o)

LOG_if_metadata_SOURCES=  $(SRCDIR)/MetaData__if__LOG.cc
LOG_if_metadata_OBJECTS=  $(LOG_if_metadata_SOURCES:.cc=.o)

LOG_inspector_SOURCES=    $(SRCDIR)/Inspector__LOG.cc \
                          $(SRCDIR)/Inspector_private_types__LOG.cc
LOG_inspector_OBJECTS=    $(LOG_inspector_SOURCES:.cc=.o)

LOG_if_inspector_SOURCES= $(SRCDIR)/Inspector_types__LOG.cc
LOG_if_inspector_OBJECTS= $(LOG_if_inspector_SOURCES:.cc=.o)

LOG_transient_SOURCES=    $(SRCDIR)/transient_dummy.cc
LOG_transient_OBJECTS=    $(LOG_transient_SOURCES:.cc=.o)

all: $(ARTIFACTS)

libLOG_interface.so: $(LOG_interface_OBJECTS)
	@$(CXX) $(CXXFLAGS) -shared $^ -o $(OUTDIR)/$@

libLOG.so: $(LOG_OBJECTS)
	@$(CXX) $(CXXFLAGS) -shared $^ -o $(OUTDIR)/$@

libLOG_sqlite.so: $(LOG_sqlite_OBJECTS)
	@$(CXX) $(CXXFLAGS) -shared $^ -o $(OUTDIR)/$@

libLOG_metadata.so: $(LOG_metadata_OBJECTS)
	@$(CXX) $(CXXFLAGS) -shared $^ -o $(OUTDIR)/$@

libLOG_if_metadata.so: $(LOG_if_metadata_OBJECTS)
	@$(CXX) $(CXXFLAGS) -shared $^ -o $(OUTDIR)/$@

libLOG_inspector.so: $(LOG_inspector_OBJECTS)
	@$(CXX) $(CXXFLAGS) -shared $^ -o $(OUTDIR)/$@

libLOG_if_inspector.so: $(LOG_if_inspector_OBJECTS)
	@$(CXX) $(CXXFLAGS) -shared $^ -o $(OUTDIR)/$@

libLOG_transient.so: $(LOG_transient_OBJECTS)
	@$(CXX) $(CXXFLAGS) -shared $^ -o $(OUTDIR)/$@

.o:
	$(CXX) $(CXXFLAGS) -c $<

clean:
	rm -f $(OUTDIR)/* $(SRCDIR)/*.o
