-- BP 7.1.6 content: Package syschar: 3 persistence-version: 7.1.6

INSERT INTO EP_PKG
	VALUES ("2b0c8fd6-d69a-4306-9ef2-2fa3c850b738",
	"36a41cf7-d411-488d-99fc-74866d4fea39",
	"36a41cf7-d411-488d-99fc-74866d4fea39",
	'Library',
	'// ########## START OAL_1 ##########
// always initialize data
self.currentLocation.longitude = 0.0;
self.currentLocation.latitude  = 0.0;
self.currentLocation.speed     = 0.0;
self.interval                  = 2000000;

LOG::LogInfo(message: "Location listener registered.");

 // start timer based on requested interval
create event instance timeout of GPS3:timeout() to self;
self.timer = TIM::timer_start_recurring(event_inst: timeout, microseconds: self.interval);
// ########### END OAL_1 ###########



// ########## START OAL_2 ##########
// prepare signal data with some dummy values that change over time
self.currentLocation.longitude = self.currentLocation.longitude + 2.0;
self.currentLocation.latitude  = self.currentLocation.latitude  + 3.0;
self.currentLocation.speed     = 
                                (self.currentLocation.latitude - 
                                 self.currentLocation.longitude) / 5.0;

// pass the new location to client component
send LocationProvider::locationUpdate(location: self.currentLocation);
// ########### END OAL_2 ###########



// ########## START OAL_3 ##########
res = TIM::timer_cancel(timer_inst_ref: self.timer);
// ########### END OAL_3 ###########



// ########## START OAL_4 ##########
select any gps from instances of GPS;
if (empty gps)
  // asynchronously create a new instance of GPS
  generate GPS1:registerListener() to GPS creator;
end if;
// ########### END OAL_4 ###########


// ########## START OAL_5 ##########
// forward message to single instance of GPS
select any gps from instances of GPS;
if (not empty gps)
  generate GPS2:unregisterListener() to gps;
end if;
// ########### END OAL_5 ###########


// ########## START OAL_6 ##########
// create an instance of the workout timer if it does not exist
select any workoutTimer from instances of WorkoutTimer;
if (empty workoutTimer)
  create object instance workoutTimer of WorkoutTimer;
end if;

// forward message to the single instance of WorkoutTimer 
generate WorkoutTimer1:startStopPressed() to workoutTimer;
// ########### END OAL_6 ###########



// ########## START OAL_7 ##########
// print the new location to the console
LOG::LogInfo(message: "location updated: ");
LOG::LogReal(message: "longitude", r: param.location.longitude);
LOG::LogReal(message: "latitude",  r: param.location.latitude );
LOG::LogReal(message: "speed",     r: param.location.speed    );
// ########### END OAL_7 ###########
',
	0);
INSERT INTO GD_MD
	VALUES ("cb8c410f-66dc-452f-acb1-ba790bd9eea7",
	112,
	"2b0c8fd6-d69a-4306-9ef2-2fa3c850b738",
	108,
	0,
	0,
	1,
	1,
	1,
	12,
	1,
	4612,
	3234,
	0,
	0,
	0,
	'4.1.17',
	'GPS_Watch::Library');
INSERT INTO GD_GE
	VALUES ("aae32724-557d-4487-9cb1-a7529426999d",
	"cb8c410f-66dc-452f-acb1-ba790bd9eea7",
	"fff30510-d90f-4286-962f-f99732ae7c5a",
	98,
	0,
	'GPS_Watch::Library::HeartRateMonitor');
INSERT INTO GD_SHP
	VALUES ("aae32724-557d-4487-9cb1-a7529426999d");
INSERT INTO GD_NCS
	VALUES ("aae32724-557d-4487-9cb1-a7529426999d");
INSERT INTO DIM_ND
	VALUES (156.000000,
	96.000000,
	"aae32724-557d-4487-9cb1-a7529426999d");
INSERT INTO DIM_GE
	VALUES (4860.000000,
	3456.000000,
	"aae32724-557d-4487-9cb1-a7529426999d",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("aae32724-557d-4487-9cb1-a7529426999d",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_CON
	VALUES ("bdab579f-93d0-4be7-bd89-6aa9c161c5de",
	4860.000000,
	3504.000000,
	"aae32724-557d-4487-9cb1-a7529426999d");
INSERT INTO GD_GE
	VALUES ("4056ebf8-823d-4ce4-b0b9-1140ac70cdc1",
	"cb8c410f-66dc-452f-acb1-ba790bd9eea7",
	"5659a879-3ecf-47ee-99d2-11f373c4a8b8",
	94,
	0,
	'GPS_Watch::Library::HeartRateMonitor::HR::HeartRateProvider');
INSERT INTO GD_CON
	VALUES ("4056ebf8-823d-4ce4-b0b9-1140ac70cdc1",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("d6a8b414-198f-4e3f-a530-24193aa62d8b",
	"4056ebf8-823d-4ce4-b0b9-1140ac70cdc1",
	1,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"d6a8b414-198f-4e3f-a530-24193aa62d8b");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"d6a8b414-198f-4e3f-a530-24193aa62d8b",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("d6a8b414-198f-4e3f-a530-24193aa62d8b",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("5943775c-a9a4-49ae-9506-456a4b8f4fa8",
	"4056ebf8-823d-4ce4-b0b9-1140ac70cdc1",
	3,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (76.000000,
	39.000000,
	"5943775c-a9a4-49ae-9506-456a4b8f4fa8");
INSERT INTO DIM_GE
	VALUES (4757.000000,
	3472.000000,
	"5943775c-a9a4-49ae-9506-456a4b8f4fa8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("5943775c-a9a4-49ae-9506-456a4b8f4fa8",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("45dade30-7aa1-4dad-8259-ece9e843cea0",
	"4056ebf8-823d-4ce4-b0b9-1140ac70cdc1",
	2,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"45dade30-7aa1-4dad-8259-ece9e843cea0");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"45dade30-7aa1-4dad-8259-ece9e843cea0",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("45dade30-7aa1-4dad-8259-ece9e843cea0",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_LS
	VALUES ("842efb44-8b71-42f7-b1ee-42b7ee2c8587",
	"4056ebf8-823d-4ce4-b0b9-1140ac70cdc1",
	"00000000-0000-0000-0000-000000000000",
	"a3e2d8f2-9982-40fd-b528-291998e19204",
	"ad17f21a-69bf-447b-ba34-64d9ba7d07f9");
INSERT INTO DIM_WAY
	VALUES ("a3e2d8f2-9982-40fd-b528-291998e19204",
	4860.000000,
	3504.000000,
	"4056ebf8-823d-4ce4-b0b9-1140ac70cdc1",
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_WAY
	VALUES ("ad17f21a-69bf-447b-ba34-64d9ba7d07f9",
	4800.000000,
	3504.000000,
	"4056ebf8-823d-4ce4-b0b9-1140ac70cdc1",
	"00000000-0000-0000-0000-000000000000",
	"a3e2d8f2-9982-40fd-b528-291998e19204");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"4056ebf8-823d-4ce4-b0b9-1140ac70cdc1",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("4056ebf8-823d-4ce4-b0b9-1140ac70cdc1",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ED
	VALUES ("bdab579f-93d0-4be7-bd89-6aa9c161c5de",
	"00000000-0000-0000-0000-000000000000",
	"4056ebf8-823d-4ce4-b0b9-1140ac70cdc1");
INSERT INTO DIM_DIA
	VALUES ("cb8c410f-66dc-452f-acb1-ba790bd9eea7",
	'',
	1.000000,
	4230.000000,
	3168.000000,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO PE_PE
	VALUES ("2b0c8fd6-d69a-4306-9ef2-2fa3c850b738",
	1,
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000",
	7);
INSERT INTO S_SYS_PROXY
	VALUES ("36a41cf7-d411-488d-99fc-74866d4fea39",
	'GPS_Watch',
	1,
	'../GPS_Watch.xtuml');
