-- BP 7.1.6 content: InstanceStateMachine syschar: 3 persistence-version: 7.1.6

INSERT INTO SM_ISM
	VALUES ("835705dc-6d51-45d6-aa91-021ff198012e",
	"48db773f-ac25-40ac-9f1e-9390b0a44f5d");
INSERT INTO SM_SM
	VALUES ("835705dc-6d51-45d6-aa91-021ff198012e",
	'',
	0);
INSERT INTO SM_MOORE
	VALUES ("835705dc-6d51-45d6-aa91-021ff198012e");
INSERT INTO SM_EVTDI
	VALUES ("db7f9318-5a54-4713-afdb-9018c0aa1296",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	'vessel_id',
	'',
	"ba5eda7a-def5-0000-0000-000000000005",
	'',
	"ea3d68f8-3b82-4592-b08f-c9544864cb91",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_LEVT
	VALUES ("f5e8c885-53ca-4c05-a9f7-a0906b352bea",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_SEVT
	VALUES ("f5e8c885-53ca-4c05-a9f7-a0906b352bea",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_EVT
	VALUES ("f5e8c885-53ca-4c05-a9f7-a0906b352bea",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"00000000-0000-0000-0000-000000000000",
	1,
	'shot',
	0,
	'',
	'CELL1',
	'');
INSERT INTO SM_LEVT
	VALUES ("ea3d68f8-3b82-4592-b08f-c9544864cb91",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_SEVT
	VALUES ("ea3d68f8-3b82-4592-b08f-c9544864cb91",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_EVT
	VALUES ("ea3d68f8-3b82-4592-b08f-c9544864cb91",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"00000000-0000-0000-0000-000000000000",
	2,
	'became_occupied',
	0,
	'',
	'CELL2',
	'');
INSERT INTO SM_STATE
	VALUES ("1152443f-da8d-49c0-8a95-da6f991a6b97",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"00000000-0000-0000-0000-000000000000",
	'Waiting to handle shot',
	1,
	0);
INSERT INTO SM_SEME
	VALUES ("1152443f-da8d-49c0-8a95-da6f991a6b97",
	"f5e8c885-53ca-4c05-a9f7-a0906b352bea",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_SEME
	VALUES ("1152443f-da8d-49c0-8a95-da6f991a6b97",
	"ea3d68f8-3b82-4592-b08f-c9544864cb91",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_NSTXN
	VALUES ("5cb3415c-e158-46f4-9f27-9ea953e19358",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"1152443f-da8d-49c0-8a95-da6f991a6b97",
	"f5e8c885-53ca-4c05-a9f7-a0906b352bea",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_TXN
	VALUES ("5cb3415c-e158-46f4-9f27-9ea953e19358",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"1152443f-da8d-49c0-8a95-da6f991a6b97",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_NSTXN
	VALUES ("f5f8f1d5-2129-4d3f-8985-cc2701245169",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"1152443f-da8d-49c0-8a95-da6f991a6b97",
	"ea3d68f8-3b82-4592-b08f-c9544864cb91",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_TXN
	VALUES ("f5f8f1d5-2129-4d3f-8985-cc2701245169",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"1152443f-da8d-49c0-8a95-da6f991a6b97",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_MOAH
	VALUES ("5b561914-2a06-42fc-b19f-a96eb15ab738",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"1152443f-da8d-49c0-8a95-da6f991a6b97");
INSERT INTO SM_AH
	VALUES ("5b561914-2a06-42fc-b19f-a96eb15ab738",
	"835705dc-6d51-45d6-aa91-021ff198012e");
INSERT INTO SM_ACT
	VALUES ("5b561914-2a06-42fc-b19f-a96eb15ab738",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	1,
	'',
	'');
INSERT INTO SM_TAH
	VALUES ("05ae9ad7-d38b-407e-b105-75960e38d557",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"5cb3415c-e158-46f4-9f27-9ea953e19358");
INSERT INTO SM_AH
	VALUES ("05ae9ad7-d38b-407e-b105-75960e38d557",
	"835705dc-6d51-45d6-aa91-021ff198012e");
INSERT INTO SM_ACT
	VALUES ("05ae9ad7-d38b-407e-b105-75960e38d557",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	1,
	'select one ocell related by self->OCELL[R2];
result = Outcome::Miss;
if empty ocell
  Display::setCell(row:self.row, column:self.column, state:Outcome::Miss);
else
  ocell.hit = true;
  select one vessel related by ocell->VESSEL[R3];
  if (not_empty vessel)
    select one functioningVessel related by ocell->VESSEL[R5];
    if (not_empty functioningVessel)
      // Assertable but assured at setup: functioningVessel and vessel are the same instance.
      // If vessel was not previously hit, tear down R5 to record the hit.
      unrelate functioningVessel from ocell across R5;
    end if;
    if (vessel.is_sunk())
      result = Outcome::Vessel_Destroyed;
      Display::setCell(row:self.row, column:self.column, state:Outcome::Vessel_Destroyed);
    else
      result = Outcome::Hit;
      Display::setCell(row:self.row, column:self.column,  state:Outcome::Hit);
    end if;
  else
    // This can happen if a second shot is directed at this cell after a
    // previous hit. The specification says to repeat the information.
    result = Outcome::Hit;
  end if;
end if;
generate GD_A8:result(cell:self.cell, hit:result) to GD class;',
	'');
INSERT INTO SM_TAH
	VALUES ("e8f33724-3c97-4eee-9e89-dcd4de17f143",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	"f5f8f1d5-2129-4d3f-8985-cc2701245169");
INSERT INTO SM_AH
	VALUES ("e8f33724-3c97-4eee-9e89-dcd4de17f143",
	"835705dc-6d51-45d6-aa91-021ff198012e");
INSERT INTO SM_ACT
	VALUES ("e8f33724-3c97-4eee-9e89-dcd4de17f143",
	"835705dc-6d51-45d6-aa91-021ff198012e",
	1,
	'select one ucell related by self->UCELL[R2];
unrelate self from ucell across R2;
delete object instance ucell;
create object instance ocell of OCELL;
relate self to ocell across R2;
select any vessel from instances of VESSEL where selected.vessel_id == param.vessel_id;
relate vessel to ocell across R3;
relate vessel to ocell across R5;
Display::setOccupied(coordinate:self.cell);',
	'');
INSERT INTO GD_MD
	VALUES ("e5515698-09c7-4f57-b998-6299cd6811ec",
	8,
	"835705dc-6d51-45d6-aa91-021ff198012e",
	40,
	0,
	0,
	1,
	1,
	1,
	12,
	1,
	0,
	0,
	0,
	0,
	0,
	'3.6.3',
	'Operational Theatre::Library::Operational Theatre::Ops::Cell::Instance State Machine');
INSERT INTO GD_GE
	VALUES ("6d0b9d74-3310-4c13-b74d-7db79c76b65b",
	"e5515698-09c7-4f57-b998-6299cd6811ec",
	"1152443f-da8d-49c0-8a95-da6f991a6b97",
	41,
	0,
	'Operational Theatre::Library::Operational Theatre::Ops::Cell::Instance State Machine::Waiting to handle shot');
INSERT INTO GD_SHP
	VALUES ("6d0b9d74-3310-4c13-b74d-7db79c76b65b");
INSERT INTO GD_NCS
	VALUES ("6d0b9d74-3310-4c13-b74d-7db79c76b65b");
INSERT INTO DIM_ND
	VALUES (352.000000,
	208.000000,
	"6d0b9d74-3310-4c13-b74d-7db79c76b65b");
INSERT INTO DIM_GE
	VALUES (4288.000000,
	3152.000000,
	"6d0b9d74-3310-4c13-b74d-7db79c76b65b",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("6d0b9d74-3310-4c13-b74d-7db79c76b65b",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_CON
	VALUES ("37fc29ad-38fd-4bbd-98de-31b4b5ead0c4",
	4640.000000,
	3234.000000,
	"6d0b9d74-3310-4c13-b74d-7db79c76b65b");
INSERT INTO DIM_CON
	VALUES ("d6d17ba5-7086-40d8-834f-68fac2c29ae6",
	4485.000000,
	3360.000000,
	"6d0b9d74-3310-4c13-b74d-7db79c76b65b");
INSERT INTO DIM_CON
	VALUES ("62bfdd44-060c-4585-b13f-a776659e6ba7",
	4368.000000,
	3313.000000,
	"6d0b9d74-3310-4c13-b74d-7db79c76b65b");
INSERT INTO DIM_CON
	VALUES ("43d7627c-609c-4823-8f1c-09130b07b7ca",
	4288.000000,
	3327.000000,
	"6d0b9d74-3310-4c13-b74d-7db79c76b65b");
INSERT INTO DIM_CON
	VALUES ("2beb374d-99d6-400a-8aee-50637f75576f",
	4288.000000,
	3184.000000,
	"6d0b9d74-3310-4c13-b74d-7db79c76b65b");
INSERT INTO GD_GE
	VALUES ("4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"e5515698-09c7-4f57-b998-6299cd6811ec",
	"5cb3415c-e158-46f4-9f27-9ea953e19358",
	42,
	0,
	'Operational Theatre::Library::Operational Theatre::Ops::Cell::Instance State Machine::Waiting to handle shot::CELL1: shot');
INSERT INTO GD_CON
	VALUES ("4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("1f071759-a905-4230-8cf5-df63550c6908",
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	1,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"1f071759-a905-4230-8cf5-df63550c6908");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"1f071759-a905-4230-8cf5-df63550c6908",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("1f071759-a905-4230-8cf5-df63550c6908",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("8324825b-3699-4dc3-b159-4d08bcb0b962",
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	3,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"8324825b-3699-4dc3-b159-4d08bcb0b962");
INSERT INTO DIM_GE
	VALUES (4612.000000,
	3367.000000,
	"8324825b-3699-4dc3-b159-4d08bcb0b962",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("8324825b-3699-4dc3-b159-4d08bcb0b962",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("56fd2d33-2f89-42ba-ad6a-4ae293497e5a",
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	2,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"56fd2d33-2f89-42ba-ad6a-4ae293497e5a");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"56fd2d33-2f89-42ba-ad6a-4ae293497e5a",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("56fd2d33-2f89-42ba-ad6a-4ae293497e5a",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_LS
	VALUES ("86c2e683-29a6-4409-80cb-30bb7a690b2b",
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"00000000-0000-0000-0000-000000000000",
	"8d893aca-fcc3-4809-96cb-16dc646f1632",
	"dab82358-38b0-4998-857b-a38f2493af37");
INSERT INTO GD_LS
	VALUES ("62846a0b-6c3d-440b-a21d-dad2298e1085",
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"86c2e683-29a6-4409-80cb-30bb7a690b2b",
	"dab82358-38b0-4998-857b-a38f2493af37",
	"a2fcd876-09be-4d29-8147-e5795f6d7f86");
INSERT INTO GD_LS
	VALUES ("2c751ee2-6813-4caa-a9ff-2c6a4170b973",
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"62846a0b-6c3d-440b-a21d-dad2298e1085",
	"a2fcd876-09be-4d29-8147-e5795f6d7f86",
	"2ecca3b0-ee2e-435b-b9a7-c6abb775eb22");
INSERT INTO GD_LS
	VALUES ("53a0ccc5-450c-4b31-b72d-47e90baeca8d",
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"2c751ee2-6813-4caa-a9ff-2c6a4170b973",
	"2ecca3b0-ee2e-435b-b9a7-c6abb775eb22",
	"62c2d3f1-684a-47a1-959d-6de943e4f4fd");
INSERT INTO DIM_WAY
	VALUES ("8d893aca-fcc3-4809-96cb-16dc646f1632",
	4640.000000,
	3234.000000,
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_WAY
	VALUES ("62c2d3f1-684a-47a1-959d-6de943e4f4fd",
	4485.000000,
	3360.000000,
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"00000000-0000-0000-0000-000000000000",
	"8d893aca-fcc3-4809-96cb-16dc646f1632");
INSERT INTO DIM_WAY
	VALUES ("dab82358-38b0-4998-857b-a38f2493af37",
	4687.000000,
	3234.000000,
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_WAY
	VALUES ("a2fcd876-09be-4d29-8147-e5795f6d7f86",
	4687.000000,
	3391.000000,
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_WAY
	VALUES ("2ecca3b0-ee2e-435b-b9a7-c6abb775eb22",
	4485.000000,
	3391.000000,
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("4fb0c952-a7d4-4f88-997a-58b6b7f04f24",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ED
	VALUES ("37fc29ad-38fd-4bbd-98de-31b4b5ead0c4",
	"d6d17ba5-7086-40d8-834f-68fac2c29ae6",
	"4fb0c952-a7d4-4f88-997a-58b6b7f04f24");
INSERT INTO GD_GE
	VALUES ("90041d94-0b15-4bed-937c-6a4d2abfd472",
	"e5515698-09c7-4f57-b998-6299cd6811ec",
	"f5f8f1d5-2129-4d3f-8985-cc2701245169",
	42,
	0,
	'Operational Theatre::Library::Operational Theatre::Ops::Cell::Instance State Machine::Waiting to handle shot::CELL2: became_occupied');
INSERT INTO GD_CON
	VALUES ("90041d94-0b15-4bed-937c-6a4d2abfd472",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("a04f0bfb-6793-4886-bc34-fd69fed6bffd",
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	1,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"a04f0bfb-6793-4886-bc34-fd69fed6bffd");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"a04f0bfb-6793-4886-bc34-fd69fed6bffd",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("a04f0bfb-6793-4886-bc34-fd69fed6bffd",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("78f0fc4b-68c7-40c5-a379-fa7ff6c6c560",
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	3,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"78f0fc4b-68c7-40c5-a379-fa7ff6c6c560");
INSERT INTO DIM_GE
	VALUES (4079.000000,
	3248.000000,
	"78f0fc4b-68c7-40c5-a379-fa7ff6c6c560",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("78f0fc4b-68c7-40c5-a379-fa7ff6c6c560",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("2965c80c-9834-4c04-bc05-f382eacdc605",
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	2,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"2965c80c-9834-4c04-bc05-f382eacdc605");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"2965c80c-9834-4c04-bc05-f382eacdc605",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("2965c80c-9834-4c04-bc05-f382eacdc605",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_LS
	VALUES ("ef47d9d2-d46c-43be-8d4f-2a024765f341",
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	"00000000-0000-0000-0000-000000000000",
	"585d89d4-832c-495b-9ff8-fcbdcfdfe737",
	"32b3f907-3eea-4b72-a863-9e1ff25528fa");
INSERT INTO GD_LS
	VALUES ("c5f84b3d-2cdb-430b-825c-b173c1e611d9",
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	"ef47d9d2-d46c-43be-8d4f-2a024765f341",
	"32b3f907-3eea-4b72-a863-9e1ff25528fa",
	"5e2caf4d-560f-4856-9aee-9f188312bc0f");
INSERT INTO GD_LS
	VALUES ("db2dd7b2-1232-43e2-bcd3-1dc28ead4ec2",
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	"c5f84b3d-2cdb-430b-825c-b173c1e611d9",
	"5e2caf4d-560f-4856-9aee-9f188312bc0f",
	"7a9a6647-92ec-40fd-9054-50335b21a7f3");
INSERT INTO DIM_WAY
	VALUES ("585d89d4-832c-495b-9ff8-fcbdcfdfe737",
	4288.000000,
	3327.000000,
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_WAY
	VALUES ("7a9a6647-92ec-40fd-9054-50335b21a7f3",
	4288.000000,
	3184.000000,
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	"00000000-0000-0000-0000-000000000000",
	"585d89d4-832c-495b-9ff8-fcbdcfdfe737");
INSERT INTO DIM_WAY
	VALUES ("32b3f907-3eea-4b72-a863-9e1ff25528fa",
	4238.000000,
	3327.000000,
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_WAY
	VALUES ("5e2caf4d-560f-4856-9aee-9f188312bc0f",
	4238.000000,
	3184.000000,
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"90041d94-0b15-4bed-937c-6a4d2abfd472",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("90041d94-0b15-4bed-937c-6a4d2abfd472",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ED
	VALUES ("43d7627c-609c-4823-8f1c-09130b07b7ca",
	"2beb374d-99d6-400a-8aee-50637f75576f",
	"90041d94-0b15-4bed-937c-6a4d2abfd472");
INSERT INTO DIM_DIA
	VALUES ("e5515698-09c7-4f57-b998-6299cd6811ec",
	'',
	1.000000,
	4000.000000,
	3000.000000,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_OBJ_PROXY
	VALUES ("48db773f-ac25-40ac-9f1e-9390b0a44f5d",
	'Cell',
	2,
	'CELL',
	'This class represents a cell on the board that can be individually shot at.

There are two kinds of cell during game play, those which are occupied and those
which are not.',
	"00000000-0000-0000-0000-000000000000",
	'../Cell.xtuml');
